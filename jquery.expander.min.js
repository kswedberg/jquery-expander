!function(e){e.expander={version:"1.4.13",defaults:{slicePoint:100,sliceOn:null,preserveWords:!0,showWordCount:!1,wordCountText:" ({{count}} words)",widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:!1,appendExpandPrefixToSummaryText:!1,wordEnd:/(&(?:[^;]+;)?|[a-zA-Z\u00C0-\u0100]+|[^\u0000-\u007F]+)$/,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",moreLinkClass:"more-link",lessLinkClass:"less-link",collapseTimer:0,expandEffect:"slideDown",expandSpeed:250,collapseEffect:"slideUp",collapseSpeed:200,userCollapse:!0,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null,afterCollapse:null}},e.fn.expander=function(a){function s(e,a){var s="span",l=e.summary,n=h.exec(l),t=n?n[2].toLowerCase():"";return a?(s="div",n&&"a"!==t&&!e.expandAfterSummary?l=l.replace(h,e.moreLabel+"$1"):l+=e.moreLabel,l='<div class="'+e.summaryClass+'">'+l+"</div>"):l+=e.moreLabel,[l," <",s+' class="'+e.detailClass+'"',">",e.details,"</"+s+">"].join("")}function l(e,a){var s='<span class="'+e.moreClass+'">';return e.appendExpandPrefixToSummaryText||(s+=e.expandPrefix,summaryText=summaryText+'<span class="expandPrefix">'+e.expandPrefix+"</span>"),e.wordCountText=e.showWordCount?e.wordCountText.replace(/\{\{count\}\}/,a.replace(u,"").replace(/\&(?:amp|nbsp);/g,"").replace(/(?:^\s+|\s+$)/,"").match(/\w+/g).length):"",s+='<a href="#" class="'+e.moreLinkClass+'">'+e.expandText+e.wordCountText+"</a></span>"}function n(a,s){return a.lastIndexOf("<")>a.lastIndexOf(">")&&(a=a.slice(0,a.lastIndexOf("<"))),s&&(a=a.replace(f,"")),e.trim(a)}function t(e,a){a.stop(!0,!0)[e.collapseEffect](e.collapseSpeed,function(){var s=a.prev("span."+e.moreClass).show();s.length||a.parent().children("div."+e.summaryClass).show().find("span."+e.moreClass).show(),e.afterCollapse&&e.afterCollapse.call(a)})}function r(a,s,l){a.collapseTimer&&(d=setTimeout(function(){t(a,s),e.isFunction(a.onCollapse)&&a.onCollapse.call(l,!1)},a.collapseTimer))}function i(a){var s="ExpandMoreHere374216623",l=a.summaryText.replace(a.sliceOn,s);l=e("<div>"+l+"</div>").text();var n=l.indexOf(s),t=a.summaryText.indexOf(a.sliceOn);return-1!==n&&n<a.slicePoint&&(a.summaryText=a.allHtml.slice(0,t)),a}var o="init";"string"==typeof a&&(o=a,a={});var d,p=e.extend({},e.expander.defaults,a),c=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,f=p.wordEnd,u=/<\/?(\w+)[^>]*>/g,m=/<(\w+)[^>]*>/g,x=/<\/(\w+)>/g,h=/(<\/([^>]+)>)\s*$/,C=/^(<[^>]+>)+.?/,v=/\s\s+/g,T=function(a){return e.trim(a||"").replace(v," ")},y={init:function(){this.each(function(){var a,o,f,h,v,y,g,w,E,S,b,P,k,O,L,I=[],$=[],j="",A={},D=this,W=e(this),F=e([]),H=e.extend({},p,W.data("expander")||e.meta&&W.data()||{}),z=!!W.find("."+H.detailClass).length,U=!!W.find("*").filter(function(){var a=e(this).css("display");return/^block|table|list/.test(a)}).length,M=U?"div":"span",Q=M+"."+H.detailClass,Z=H.moreClass+"",q=H.lessClass+"",B=H.expandSpeed||0,G=T(W.html()),J=G.slice(0,H.slicePoint);if(H.moreSelector="span."+Z.split(" ").join("."),H.lessSelector="span."+q.split(" ").join("."),!e.data(this,"expanderInit")){for(e.data(this,"expanderInit",!0),e.data(this,"expander",H),e.each(["onSlice","beforeExpand","afterExpand","onCollapse","afterCollapse"],function(a,s){A[s]=e.isFunction(H[s])}),J=n(J),v=J.replace(u,"").length;v<H.slicePoint;)h=G.charAt(J.length),"<"===h&&(h=G.slice(J.length).match(C)[0]),J+=h,v++;for(H.sliceOn&&(L=i({sliceOn:H.sliceOn,slicePoint:H.slicePoint,allHtml:G,summaryText:J}),J=L.summaryText),J=n(J,H.preserveWords&&G.slice(J.length).length),H.appendExpandPrefixToSummaryText&&(J=J+'<span class="expandPrefix">'+H.expandPrefix+"</span>"),y=J.match(m)||[],g=J.match(x)||[],f=[],e.each(y,function(e,a){c.test(a)||f.push(a)}),y=f,o=g.length,a=0;o>a;a++)g[a]=g[a].replace(x,"$1");if(e.each(y,function(a,s){var l=s.replace(m,"$1"),n=e.inArray(l,g);-1===n?(I.push(s),$.push("</"+l+">")):g.splice(n,1)}),$.reverse(),z)E=W.find(Q).remove().html(),J=W.html(),G=J+E,w="";else{if(E=G.slice(J.length),S=e.trim(E.replace(u,"")),""===S||S.split(/\s+/).length<H.widow)return;w=$.pop()||"",J+=$.join(""),E=I.join("")+E}H.moreLabel=W.find(H.moreSelector).length?"":l(H,E),U?E=G:"&"===J.charAt(J.length-1)&&(j=/^[#\w\d\\]+;/.exec(E),j&&(E=E.slice(j[0].length),J+=j[0])),J+=w,H.summary=J,H.details=E,H.lastCloseTag=w,A.onSlice&&(f=H.onSlice.call(D,H),H=f&&f.details?f:H),b=s(H,U),W.html(b),k=W.find(Q),O=W.find(H.moreSelector),"slideUp"===H.collapseEffect&&"slideDown"!==H.expandEffect||W.is(":hidden")?k.css({display:"none"}):k[H.collapseEffect](0),F=W.find("div."+H.summaryClass),P=function(e){e.preventDefault(),O.hide(),F.hide(),A.beforeExpand&&H.beforeExpand.call(D),k.stop(!1,!0)[H.expandEffect](B,function(){k.css({zoom:""}),A.afterExpand&&H.afterExpand.call(D),r(H,k,D)})},O.find("a").unbind("click.expander").bind("click.expander",P),H.userCollapse&&!W.find(H.lessSelector).length&&W.find(Q).append('<span class="'+H.lessClass+'">'+H.userCollapsePrefix+'<a href="#" class="'+H.lessLinkClass+'">'+H.userCollapseText+"</a></span>"),W.find(H.lessSelector+" a").unbind("click.expander").bind("click.expander",function(a){a.preventDefault(),clearTimeout(d);var s=e(this).closest(Q);t(H,s),A.onCollapse&&H.onCollapse.call(D,!0)})}})},destroy:function(){this.each(function(){var a,s,l=e(this);l.data("expanderInit")&&(a=e.extend({},l.data("expander")||{},p),s=l.find("."+a.detailClass).contents(),l.removeData("expanderInit"),l.removeData("expander"),l.find(a.moreSelector).remove(),l.find("."+a.summaryClass).remove(),l.find("."+a.detailClass).after(s).remove(),l.find(a.lessSelector).remove())})}};return y[o]&&y[o].call(this),this},e.fn.expander.defaults=e.expander.defaults}(jQuery);
